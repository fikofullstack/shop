import"./mian-S89VSPO5.js";document.addEventListener("DOMContentLoaded",()=>{function C(t,e){return`chip--${t}--${e}`.replace(/\s+/g,"-").toLowerCase()}function s(t,e=document){return e.querySelector(t)}function l(t,e=document){return Array.from(e.querySelectorAll(t))}const m=s("#selected-chips"),g=s("#productsContainer"),E=s("#resultsCount"),b=s("#sortSelect"),d=s("#btnList"),c=s("#btnGrid");g||console.warn("productsContainer not found (#productsContainer)"),m||console.warn("selected-chips container not found (#selected-chips)");const y=[{id:1,title:"T-Shirt Red S",price:29,color:"Red",size:"S",material:"Cotton",image:"./src/img/rename/1.png"},{id:2,title:"T-Shirt Blue M",price:35,color:"Blue",size:"M",material:"Cotton",image:""},{id:3,title:"Leather Jacket L",price:199,color:"Black",size:"L",material:"Leather",image:""},{id:4,title:"Wool Sweater M",price:89,color:"Black",size:"M",material:"Wool",image:""},{id:5,title:"Casual Shirt L",price:45,color:"Blue",size:"L",material:"Cotton",image:""},{id:6,title:"Denim Jacket M",price:120,color:"Blue",size:"M",material:"Cotton",image:""},{id:7,title:"Trousers L",price:75,color:"Black",size:"L",material:"Polyester",image:"./src/img/rename/7.png"},{id:8,title:"Shirt S",price:40,color:"Red",size:"S",material:"Cotton",image:"./src/img/rename/8.png"},{id:9,title:"Coat L",price:210,color:"Black",size:"L",material:"Leather",image:"./src/img/rename/9.png"},{id:10,title:"Hoodie M",price:60,color:"Blue",size:"M",material:"Cotton",image:"./src/img/rename/10.png"},{id:11,title:"Shorts S",price:25,color:"Red",size:"S",material:"Polyester",image:"./src/img/rename/11.png"},{id:12,title:"Sweatpants M",price:55,color:"Black",size:"M",material:"Cotton",image:"./src/img/rename/12.png"}];function M(){l(".dropdown").forEach(t=>{const e=s(".dropdown-button",t),i=s(".dropdown-list",t);e&&(e.addEventListener("click",r=>{r.stopPropagation();const n=t.classList.toggle("open");e.setAttribute("aria-expanded",String(n)),n&&w(t)}),document.addEventListener("click",r=>{t.contains(r.target)||(t.classList.remove("open"),e&&e.setAttribute("aria-expanded","false"))}),e.addEventListener("keydown",r=>{r.key==="Enter"||r.key===" "?(r.preventDefault(),e.click()):r.key==="Escape"&&(t.classList.remove("open"),e.setAttribute("aria-expanded","false"),e.focus())}),i&&i.addEventListener("keydown",r=>{r.key==="Escape"&&(t.classList.remove("open"),e.setAttribute("aria-expanded","false"),e.focus())}))})}function w(t){l(".dropdown.open").forEach(e=>{if(e!==t){e.classList.remove("open");const i=s(".dropdown-button",e);i&&i.setAttribute("aria-expanded","false")}})}function S(t,e,i){if(!m)return;const r=C(t,e);if(s("#"+r))return;const n=document.createElement("div");n.className="chip",n.id=r;const o=document.createElement("span");o.className="label",o.textContent=`${t}: ${e}`;const a=document.createElement("button");a.className="remove",a.type="button",a.title="Удалить фильтр",a.innerHTML="✕",a.addEventListener("click",()=>{n.classList.add("removing"),i&&(i.checked=!1),setTimeout(()=>n.remove(),180),setTimeout(f,190)}),n.appendChild(o),n.appendChild(a),m.appendChild(n)}function z(t){const e=s("#"+t);e&&(e.classList.add("removing"),setTimeout(()=>e.remove(),180))}m&&m.addEventListener("click",t=>{const e=t.target.closest(".chip");if(!e)return;const i=e.id.split("--");if(i.length>=3){const r=i[1],n=document.querySelector(`.dropdown[data-group="${A(r)}"]`);if(n){const o=s(".dropdown-button",n);o&&(w(n),n.classList.add("open"),o.setAttribute("aria-expanded","true"),o.focus())}}});function A(t){return t&&t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())}function N(){l(".filter").forEach(t=>{if(!t.dataset.group){const e=t.closest(".dropdown");e&&e.dataset.group&&(t.dataset.group=e.dataset.group)}t.dataset.value||(t.dataset.value=t.value||t.getAttribute("value")||t.nextSibling?.textContent?.trim()),t.addEventListener("change",e=>{const i=e.target,r=i.dataset.value,n=i.dataset.group||"Filter",o=C(n,r);i.checked?S(n,r,i):z(o),f()})})}function k(){const t={};l(".filter:checked").forEach(e=>{const i=e.dataset.group||e.getAttribute("data-group")||"Filter";t[i]||(t[i]=new Set),t[i].add(e.dataset.value||e.value)});for(const e in t)t[e]=Array.from(t[e]);return t}function P(t,e){if(!e||e.length===0)return!0;for(const i of e)if(i.includes("+")){const r=Number(i.replace("+",""));if(t.price>=r)return!0}else{const[r,n]=i.split("-").map(Number);if(!isNaN(r)&&!isNaN(n)&&t.price>=r&&t.price<=n)return!0}return!1}function _(t,e){return t.filter(i=>!(e.Size&&e.Size.length&&!e.Size.includes(i.size)||e.Color&&e.Color.length&&!e.Color.includes(i.color)||e.Material&&e.Material.length&&!e.Material.includes(i.material)||e.Price&&e.Price.length&&!P(i,e.Price)))}function x(t,e){if(!e||e==="default")return t;const i=[...t];return e==="price-asc"?i.sort((r,n)=>r.price-n.price):e==="price-desc"&&i.sort((r,n)=>n.price-r.price),i}function f(){if(!g)return;const t=k();let e=_(y,t);const i=b?b.value:"default";e=x(e,i),E&&(E.textContent=`Результаты: ${e.length}`),g.innerHTML="";const r=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--cols"))||1;e.forEach(n=>{const o=document.createElement("div");o.className="product",r>1&&o.classList.add("product--grid");const a=document.createElement("div");if(a.className="product__img",n.image){const u=document.createElement("img");u.src=n.image,u.alt=n.title,u.style.width="100%",u.style.height="100%",u.style.objectFit="cover",a.appendChild(u)}const h=document.createElement("div");h.className="product__info",h.innerHTML=`
        <div class="product__title">${L(n.title)}</div>
        <div class="product__meta">${L(n.color)} · ${L(n.size)} · ${L(n.material)}</div>
        <div class="product__price">$${n.price}</div>
      `,o.appendChild(a),o.appendChild(h),g.appendChild(o)})}function L(t){return String(t).replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}function v(t){if(t==="list")document.documentElement.style.setProperty("--cols",1),d&&d.classList.add("active"),c&&c.classList.remove("active");else{let e=3;const i=window.innerWidth;i<600?e=1:i<960?e=2:e=3,document.documentElement.style.setProperty("--cols",e),c&&c.classList.add("active"),d&&d.classList.remove("active")}f()}d&&c&&(d.addEventListener("click",()=>v("list")),c.addEventListener("click",()=>v("grid"))),window.addEventListener("resize",()=>{if(!c||!c.classList.contains("active"))return;let t=3;const e=window.innerWidth;e<600?t=1:e<960?t=2:t=3,document.documentElement.style.setProperty("--cols",t),f()}),M(),N(),l(".filter:checked").forEach(t=>{S(t.dataset.group||"Filter",t.dataset.value||t.value,t)}),v("grid"),f(),document.addEventListener("keydown",t=>{t.key==="Escape"&&l(".dropdown.open").forEach(e=>{e.classList.remove("open");const i=s(".dropdown-button",e);i&&i.setAttribute("aria-expanded","false")})})});console.log(p);
